(this["webpackJsonpweatherzone-react-redux"]=this["webpackJsonpweatherzone-react-redux"]||[]).push([[0],{179:function(e,t,n){},188:function(e,t,n){},206:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var c=n(4),a=(n(179),n(0)),r=n.n(a),o=n(47),s=n.n(o),i=n(31),u=n(24),l=n.n(u),d=n(60),j=n(16),b=(n(188),n(43)),O=n(39),h=n(156),f=n(157),p=n(158),m=n.n(p),v=n(76),x=n.n(v),y={},A=[],_=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(b.a)(Object(b.a)({},{locdet:1,latlon:1,lt:"aploc",period:48,detail:2,u:1,format:"json"}),n),a={params:{lt:c.lt,lc:t,locdet:c.locdet,latlon:c.latlon,pdf:"twc(period=".concat(c.period,",detail=").concat(c.detail,")"),u:c.u,format:c.format}},e.abrupt("return",m.a.get("https://ws.weatherzone.com.au",a));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(e){var t=[];return e.forEach((function(e){t.push({name:x()(e.utc_time).format("ddd Do, h:mm a"),temp:e.temperature,speed:e.wind_speed,feelsLike:e.feels_like_c,humidity:e.relative_humidity})})),console.log("getWeatherData graphForecasts: ",t),function(e){e({type:"UPDATE_LOCATION_GRAPH_FORECASTS",payload:t})}},C=function(e,t){return function(){var n=Object(d.a)(l.a.mark((function n(c,a){var r,o,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(r=a().forecast[e])||r.forceFetch){n.next=5;break}return console.log("updateWeatherData locationData exists return the same: "),n.abrupt("return",r);case 5:return n.next=7,_(e,{options:t});case 7:return o=n.sent,console.log("updateWeatherData RESPONSE: ",o.data),r=o.data.countries[0].locations[0],(s={})[e]=r,s[e].forceFetch=!1,c({type:"ADD_LOCATION_FORECASTS",location:s}),n.abrupt("return",r);case 17:return n.prev=17,n.t0=n.catch(0),console.error("updateWeatherData ERR: ",n.t0),c({type:"ADD_PART_DAY_FORECASTS",error:n.t0}),n.abrupt("return",n.t0);case 22:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e,t){return n.apply(this,arguments)}}()},g=Object(O.combineReducers)({forecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(console.log("store dispatch :: forecast ::: ",t),t.type){case"ADD_LOCATION_FORECASTS":return Object(b.a)(Object(b.a)({},e),t.location);case"CLEAR_ALL_LOCATION_FORECASTS":return Object(b.a)(Object(b.a)({},e),t.forecasts);default:return e}},graphForecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(console.log("store dispatch :: graphForecast ::: ",t),t.type){case"UPDATE_LOCATION_GRAPH_FORECASTS":return t.payload;default:return e}}}),w=Object(O.createStore)(g,Object(f.composeWithDevTools)(Object(O.applyMiddleware)(h.a))),D=(n(206),n(82)),F=n.n(D),T=0;var N=function(e){var t,n=Object(a.useState)(!0),r=Object(j.a)(n,2),o=r[0],s=r[1],u=Object(a.useState)(!0),l=Object(j.a)(u,2),d=l[0],b=l[1],O=Object(i.c)((function(t){return t.forecast[e.locationId]})),h=function(e){var t=F()(e).dayOfYear();return(0===T||t!==T)&&(T=t,!0)},f=function(e,t){return t?e:(e/1.852).toFixed(1)};return Object(c.jsxs)("div",{className:"forecast-table-container",children:[Object(c.jsxs)("div",{className:"buttons-container",children:[Object(c.jsx)("input",{type:"button",onClick:function(){s(!o)},value:"Show temp in ".concat(o?"Fahrenheit":"Celsius")}),Object(c.jsx)("input",{type:"button",onClick:function(){b(!d)},value:"Show wind speed in ".concat(d?"Knots":"Km/h")})]}),Object(c.jsxs)("table",{className:"forecast",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"date",children:"Date"}),Object(c.jsx)("th",{className:"chance",children:"Probability of Rain"}),Object(c.jsxs)("th",{className:"temp",children:["Temperature (",o?Object(c.jsx)(c.Fragment,{children:"\u2103"}):Object(c.jsx)(c.Fragment,{children:"\u2109"}),")"]}),Object(c.jsxs)("th",{className:"speed",children:["Wind Speed (",d?"Km/h":"knots",")"]}),Object(c.jsx)("th",{className:"direction",children:"Wind Direction"})]})}),null===O||void 0===O||null===(t=O.part_day_forecasts)||void 0===t?void 0:t.forecasts.map((function(e,t){return Object(c.jsxs)("tbody",{children:[h(e.utc_time)&&Object(c.jsx)("tr",{className:"new-day",children:Object(c.jsx)("td",{colSpan:5,children:F()(e.local_time).tz(e.time_zone).format("DD/MM/YY dddd z")})}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:F()(e.local_time).format("h:mm a")}),Object(c.jsx)("td",{children:e.precis}),Object(c.jsx)("td",{children:(n=e.temperature,a=o,a?n:(1.8*n+32).toFixed(1))}),Object(c.jsx)("td",{children:f(e.wind_speed,d)}),Object(c.jsx)("td",{children:e.wind_direction})]},t)]},t);var n,a}))]})]})},E=n(345),L=n(344),k=n(169),R=n(170),I=n(84),P=n(65),K=n(172);var W=function(e){var t=Object(a.useRef)(),n=Object(a.useState)(0),r=Object(j.a)(n,2),o=r[0],s=r[1],u=Object(i.c)((function(e){return e.graphForecast})),l=Object(a.useState)(!0),d=Object(j.a)(l,2),b=d[0],O=d[1],h=Object(a.useState)(!0),f=Object(j.a)(h,2),p=f[0],m=f[1];return Object(a.useEffect)((function(){s(t.current.offsetWidth-10)}),[]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("div",{className:"buttons-container",children:[Object(c.jsx)("input",{type:"button",onClick:function(){O(!b)},value:"".concat(b?"Hide":"Show"," Temp")}),Object(c.jsx)("input",{type:"button",onClick:function(){m(!p)},value:"".concat(p?"Hide":"Show"," Humidity")})]}),Object(c.jsx)("div",{id:"graph-container",ref:t,children:Object(c.jsxs)(E.a,{width:o,height:300,data:u,children:[Object(c.jsx)(L.a,{strokeDasharray:"3 3"}),Object(c.jsx)(k.a,{dataKey:"name"}),Object(c.jsx)(R.a,{dataKey:"humidity"}),Object(c.jsx)(I.a,{}),Object(c.jsx)(P.a,{}),b&&Object(c.jsx)(K.a,{type:"monotone",dataKey:"temp",stroke:"#CC0000",activeDot:{r:8}}),p&&Object(c.jsx)(K.a,{type:"monotone",dataKey:"humidity",stroke:"#993333"}),Object(c.jsx)(K.a,{type:"monotone",dataKey:"feelsLike",stroke:"#cccc00"}),Object(c.jsx)(K.a,{type:"monotone",dataKey:"speed",stroke:"#33ccff"})]})})]})},z=[{name:"Adelaide",value:12495},{name:"Brisbane",value:9388},{name:"Canberra",value:3928},{name:"Darwin",value:11},{name:"Hobart",value:15464},{name:"Melbourne",value:5594},{name:"Perth",value:13896},{name:"Sydney",value:624}];var H=function(){var e=Object(a.useState)(624),t=Object(j.a)(e,2),n=t[0],r=t[1],o=Object(i.b)(),s=Object(i.c)((function(e){return e.forecast[n]}));Object(a.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(C(n,{}));case 2:return t=e.sent,e.next=5,o(S(t.part_day_forecasts.forecasts));case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(a.useEffect)((function(){var e=setInterval((function(){console.log("*********** CLEARING ALL LOCATION DATA **************** except selected item : ",u.current.value),o(function(e){return function(t,n){var c=n().forecast,a={};Object.keys(c).forEach((function(t){parseInt(t,10)===e?(a[t]=c[t],a[t].forceFetch=!0):a[t]=void 0})),t({type:"CLEAR_ALL_LOCATION_FORECASTS",forecasts:a})}}(parseInt(u.current.value,10)))}),9e4);return function(){return clearInterval(e)}}),[]);var u=Object(a.useRef)();return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("div",{className:"options-container",children:[Object(c.jsx)("label",{children:"Please select a Location: "}),Object(c.jsx)("select",{ref:u,id:"locations",onChange:function(e){r(e.target.value)},defaultValue:n,children:z.map((function(e,t){return Object(c.jsx)("option",{value:e.value,children:e.name},t)}))})]}),Object(c.jsxs)("h1",{children:["Weather forecast for ",null===s||void 0===s?void 0:s.name]}),Object(c.jsx)(W,{}),Object(c.jsx)(N,{locationId:n})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,347)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(i.a,{store:w,children:Object(c.jsx)(H,{})})}),document.getElementById("root")),M()}},[[339,1,2]]]);
//# sourceMappingURL=main.c1009ce7.chunk.js.map